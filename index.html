<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>膜厚單位換算器 Thickness Unit Converter</title>
  <style>
    body{font-family:"微軟正黑體",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#f4f8fc;margin:0;padding:24px;display:flex;justify-content:center}
    .wrap{width:min(760px,100%);background:#fff;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,.08);padding:20px}
    h1{text-align:center;color:#317EFB;margin:0 0 10px}
    .sub{text-align:center;color:#666;margin-bottom:16px}
    .grid{display:grid;gap:14px}
    @media (min-width:680px){.grid{grid-template-columns:1fr 1fr}}
    .row{display:flex;flex-direction:column;gap:6px}
    label{font-weight:600}
    input{padding:10px;border:1px solid #ccc;border-radius:8px;font-size:1rem}
    input:focus{border-color:#317EFB;outline:none;box-shadow:0 0 0 2px rgba(49,126,251,.2)}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>📏 膜厚單位換算器｜Thickness Unit Converter</h1>
    <div class="sub">五欄任填，其他自動同步</div>
    <div class="grid">
      <div class="row"><label>mm</label><input id="mm" type="text"></div>
      <div class="row"><label>µm</label><input id="um" type="text"></div>
      <div class="row"><label>µ”in</label><input id="uin" type="text"></div>
      <div class="row"><label>inch</label><input id="inch" type="text"></div>
      <div class="row"><label>條</label><input id="strip" type="text"></div>
    </div>
  </div>

<script>
document.addEventListener("DOMContentLoaded", function(){

  var UM_PER_MM = 1000;
  var UM_PER_INCH = 25400;
  var MICROIN_PER_UM = 1000000 / UM_PER_INCH;
  var UM_PER_STRIP = 10;
  var DECIMALS = 5;

  var el = {
    mm: document.getElementById("mm"),
    um: document.getElementById("um"),
    uin: document.getElementById("uin"),
    inch: document.getElementById("inch"),
    strip: document.getElementById("strip")
  };

  function toNumber(val){ return parseFloat(val); }
  function fmt(n){ return isFinite(n) ? n.toFixed(DECIMALS).replace(/\\.0+$/,'').replace(/(\\.\\d*?)0+$/,'$1') : ''; }

  function fillFromUm(um){
    el.mm.value    = fmt(um / UM_PER_MM);
    el.um.value    = fmt(um);
    el.uin.value   = fmt(um * MICROIN_PER_UM);
    el.inch.value  = fmt(um / UM_PER_INCH);
    el.strip.value = fmt(um / UM_PER_STRIP);
  }

  function toUm(which, v){
    if(which==="mm") return v*UM_PER_MM;
    if(which==="um") return v;
    if(which==="uin") return v*0.0254;
    if(which==="inch") return v*UM_PER_INCH;
    if(which==="strip") return v*UM_PER_STRIP;
  }

  var updating=false;
  function handle(which){
    if(updating) return;
    updating=true;
    var v = toNumber(el[which].value);
    if(!isNaN(v)){
      var um = toUm(which,v);
      fillFromUm(um);
      el[which].value = el[which].value; // 保持輸入中格式
    }
    updating=false;
  }

  ["mm","um","uin","inch","strip"].forEach(function(k){
    ["input","change","keyup"].forEach(function(ev){
      el[k].addEventListener(ev, function(){ handle(k); });
    });
  });

  // 預設範例：20 µm
  fillFromUm(20);

});
</script>
</body>
</html>
