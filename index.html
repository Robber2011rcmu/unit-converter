<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>è†œåšå–®ä½æ›ç®—å™¨ Thickness Unit Converter</title>
  <style>
    body{font-family:"å¾®è»Ÿæ­£é»‘é«”",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#f4f8fc;margin:0;padding:24px;display:flex;justify-content:center}
    .wrap{width:min(760px,100%);background:#fff;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,.08);padding:20px}
    h1{margin:0 0 8px;text-align:center;color:#317EFB;font-size:1.5rem}
    .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
    .sub{color:#6b7280;text-align:center;margin:0 auto 12px}
    .grid{display:grid;gap:14px}
    @media (min-width:680px){.grid{grid-template-columns:1fr 1fr}}
    .row{display:flex;flex-direction:column;gap:6px}
    label{font-weight:600}
    input{padding:12px;border:1px solid #e5e7eb;border-radius:10px;font-size:1.05rem}
    input:focus{outline:none;border-color:#317EFB;box-shadow:0 0 0 3px rgba(49,126,251,.15)}
    .hint{font-size:.9rem;color:#6b7280}
    .btn{padding:8px 12px;border:1px solid #317EFB;background:#eaf2ff;color:#1b59c7;border-radius:10px;cursor:pointer}
    .btn:active{transform:scale(.98)}
  </style>
</head>
<body>
  <form class="wrap" autocomplete="off" autocapitalize="off" spellcheck="false">
    <div class="topbar">
      <h1 style="margin:0;">ğŸ“ è†œåšå–®ä½æ›ç®—å™¨ï½œThickness Unit Converter</h1>
      <button type="button" id="demo" class="btn" title="å¡«å…¥ç¤ºç¯„å€¼">å¡«å…¥ç¤ºç¯„å€¼</button>
    </div>
    <p class="sub">äº”æ¬„ä»»å¡«ï¼Œå…¶ä»–è‡ªå‹•åŒæ­¥ï½œEnter any field, others update automatically</p>

    <div class="grid">
      <!-- 1. Âµm -->
      <div class="row">
        <label for="um">Âµmï¼ˆå¾®ç±³ / micrometerï¼‰</label>
        <input id="um" name="um" type="text" inputmode="decimal" autocomplete="off" placeholder="e.g. 20">
        <div class="hint">åŸºæº–å–®ä½ Base unit</div>
      </div>

      <!-- 2. Âµâ€in -->
      <div class="row">
        <label for="uin">Âµâ€inï¼ˆå¾®è‹±å‹ / microinchï¼‰</label>
        <input id="uin" name="uin" type="text" inputmode="decimal" autocomplete="off" placeholder="e.g. 335.43">
        <div class="hint">1 Âµm = 1,000,000 / 25,400 â‰ˆ 39.37007874 Âµâ€in</div>
      </div>

      <!-- 3. inch -->
      <div class="row">
        <label for="inch">inchï¼ˆè‹±å‹ / inchï¼‰</label>
        <input id="inch" name="inch" type="text" inputmode="decimal" autocomplete="off" placeholder="e.g. 0.0008">
        <div class="hint">1 inch = 25,400 Âµmï¼ˆexactï¼‰</div>
      </div>

      <!-- 4. æ¢ -->
      <div class="row">
        <label for="strip">æ¢ï¼ˆstripï¼‰</label>
        <input id="strip" name="strip" type="text" inputmode="decimal" autocomplete="off" placeholder="e.g. 2.54">
        <div class="hint">1 æ¢ = 10 Âµm</div>
      </div>

      <!-- 5. mmï¼ˆæ”¾æœ€å¾Œï¼‰ -->
      <div class="row">
        <label for="mm">mmï¼ˆå…¬é‡ / millimeterï¼‰</label>
        <input id="mm" name="mm" type="text" inputmode="decimal" autocomplete="off" placeholder="e.g. 0.02">
        <div class="hint">1 mm = 1000 Âµm</div>
      </div>
    </div>
  </form>

  <script>
    // â€”â€” å¸¸æ•¸ï¼ˆç›¸å®¹å¯«æ³•ï¼‰â€”â€”
    var UM_PER_MM      = 1000;                 // Âµm per mm
    var UM_PER_INCH    = 25400;                // Âµm per inch (exact)
    var MICROIN_PER_UM = 1000000 / UM_PER_INCH;// Âµ" in per Âµm
    var UM_PER_STRIP   = 10;                   // Âµm per æ¢
    var DECIMALS       = 5;

    function $(id){ return document.getElementById(id); }
    var el = { um:$('um'), uin:$('uin'), inch:$('inch'), strip:$('strip'), mm:$('mm') };

    function toNumber(raw){
      if (typeof raw !== 'string') raw = String(raw == null ? '' : raw);
      // ç§»é™¤é€—è™Ÿ/ç©ºç™½ã€å…¨å½¢æ•¸å­—è½‰åŠå½¢
      raw = raw.replace(/[, \t\r\n]/g,'').replace(/[ï¼-ï¼™ï¼]/g,function(ch){ return ch==='ï¼'?'.':String.fromCharCode(ch.charCodeAt(0)-0xFF10+0x30); });
      var n = Number(raw);
      return isFinite(n) ? n : NaN;
    }
    function fmt(n){
      if (!isFinite(n)) return '';
      var s = n.toFixed(DECIMALS);
      s = s.replace(/(\.\d*?[1-9])0+$/,'$1').replace(/\.0+$/,'').replace(/\.$/,'');
      return s;
    }

    function fillFromUm(um){
      el.um.value    = fmt(um);
      el.uin.value   = fmt(um * MICROIN_PER_UM);
      el.inch.value  = fmt(um / UM_PER_INCH);
      el.strip.value = fmt(um / UM_PER_STRIP);
      el.mm.value    = fmt(um / UM_PER_MM);
    }

    function toUm(which, v){
      if (which === 'um')   return v;
      if (which === 'uin')  return v * 0.0254;     // 1 Âµ" in = 0.0254 Âµm
      if (which === 'inch') return v * UM_PER_INCH;
      if (which === 'strip')return v * UM_PER_STRIP;
      if (which === 'mm')   return v * UM_PER_MM;
      return NaN;
    }

    var updating = false;
    function handle(which){
      if (updating) return;
      updating = true;
      var v = toNumber(el[which].value);
      if (isFinite(v)) {
        fillFromUm(toUm(which, v));
        // ä¿ç•™æ­£åœ¨è¼¸å…¥æ¬„ä½çš„åŸå­—ä¸²ï¼ˆé¿å…æ¸¸æ¨™è·³å‹•ï¼‰
        el[which].value = el[which].value;
      } else {
        // è‹¥è¼¸å…¥ç„¡æ•ˆï¼Œä¸åŒæ­¥ï¼Œä½†ä¹Ÿä¸è¦†è“‹å…¶ä»–æ¬„ä½
      }
      updating = false;
    }

    function bindAll(){
      ['um','uin','inch','strip','mm'].forEach(function(k){
        ['input','change','keyup','paste','blur'].forEach(function(ev){
          el[k].addEventListener(ev, function(){ handle(k); });
        });
      });
    }

    function clearAll(){
      Object.keys(el).forEach(function(k){ el[k].value = ''; });
    }

    // DOM å°±ç·’ â†’ ç¶å®š + æ¸…ç©ºï¼ˆä¸å†è‡ªå‹•å¡«é è¨­å€¼ï¼‰
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', function(){ bindAll(); clearAll(); });
    } else {
      bindAll(); clearAll();
    }

    // æä¾›æ‰‹å‹•ç¤ºç¯„æŒ‰éˆ•
    $('demo').addEventListener('click', function(){
      fillFromUm(20); // æ‰‹å‹•ç¤ºç¯„ï¼š20 Âµm
    });
  </script>
</body>
</html>
